<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="数据绑定 # 数据绑定就是将组件类中的数据显示在组件模板中，当组件类中的数据发生变化时会自动被同步到组件模板中（数据驱动 DOM ）。
在 Angular 中使用差值表达式进行数据绑定，即 {{ }}。
<h2>{{message}}</h2> <h2>{{getInfo()}}</h2> <h2>{{a == b ? '相等': '不等'}}</h2> <h2>{{'Hello Angular'}}</h2> <p [innerHTML]=&#34;htmlSnippet&#34;></p> <!-- 对数据中的代码进行转义 --> 属性绑定 # 普通属性 # 属性绑定分为两种情况，绑定 DOM 对象属性和绑定 HTML 标记属性。
使用 [属性名称] 为元素绑定 DOM 对象属性。
<img [src]=&#34;imgUrl&#34;/> 使用 [attr.属性名称] 为元素绑定 HTML 标记属性
<td [attr.colspan]=&#34;colSpan&#34;></td> 在大多数情况下，DOM 对象属性和 HTML 标记属性是对应的关系，所以使用第一种情况。但是某些属性只有 HTML 标记存在，DOM 对象中不存在，此时需要使用第二种情况，比如 colspan 属性，在 DOM 对象中就没有，或者自定义 HTML 属性也需要使用第二种情况。
class 属性 # <button class=&#34;btn btn-primary&#34; [class.active]=&#34;isActive&#34;>按钮</button> <div [ngClass]=&#34;{'active': true, 'error': true}&#34;></div> ngClass 可以绑定多个类名。"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="组件模板"><meta property="og:description" content="数据绑定 # 数据绑定就是将组件类中的数据显示在组件模板中，当组件类中的数据发生变化时会自动被同步到组件模板中（数据驱动 DOM ）。
在 Angular 中使用差值表达式进行数据绑定，即 {{ }}。
<h2>{{message}}</h2> <h2>{{getInfo()}}</h2> <h2>{{a == b ? '相等': '不等'}}</h2> <h2>{{'Hello Angular'}}</h2> <p [innerHTML]=&#34;htmlSnippet&#34;></p> <!-- 对数据中的代码进行转义 --> 属性绑定 # 普通属性 # 属性绑定分为两种情况，绑定 DOM 对象属性和绑定 HTML 标记属性。
使用 [属性名称] 为元素绑定 DOM 对象属性。
<img [src]=&#34;imgUrl&#34;/> 使用 [attr.属性名称] 为元素绑定 HTML 标记属性
<td [attr.colspan]=&#34;colSpan&#34;></td> 在大多数情况下，DOM 对象属性和 HTML 标记属性是对应的关系，所以使用第一种情况。但是某些属性只有 HTML 标记存在，DOM 对象中不存在，此时需要使用第二种情况，比如 colspan 属性，在 DOM 对象中就没有，或者自定义 HTML 属性也需要使用第二种情况。
class 属性 # <button class=&#34;btn btn-primary&#34; [class.active]=&#34;isActive&#34;>按钮</button> <div [ngClass]=&#34;{'active': true, 'error': true}&#34;></div> ngClass 可以绑定多个类名。"><meta property="og:type" content="article"><meta property="og:url" content="http://shipengqi.github.io/frontend-learn/docs/angular/02_component/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-12-08T16:28:03+08:00"><title>组件模板 | Frontend Learning</title><link rel=manifest href=/frontend-learn/manifest.json><link rel=icon href=/frontend-learn/favicon.png type=image/x-icon><link rel=stylesheet href=/frontend-learn/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous><script defer src=/frontend-learn/flexsearch.min.js></script>
<script defer src=/frontend-learn/en.search.min.037765717c349e52e429233c20732dc8d721ceb6f1132b7c4c982cc2b219d302.js integrity="sha256-A3dlcXw0nlLkKSM8IHMtyNchzrbxEyt8TJgswrIZ0wI=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/frontend-learn/><span>Frontend Learning</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://shipengqi.github.io/ target=_blank rel=noopener>Blog</a></li><li><a href=https://github.com/shipengqi/frontend-learn target=_blank rel=noopener>Github</a></li></ul><ul><li><a href=/frontend-learn/docs/html/>HTML 和 CSS</a><ul><li><a href=/frontend-learn/docs/html/01_tags/>HTML 标签</a></li><li><a href=/frontend-learn/docs/html/02_css/>CSS 常用属性</a></li><li><a href=/frontend-learn/docs/html/03_layout/>布局与定位</a></li><li><a href=/frontend-learn/docs/html/04_animation/>过渡和动画</a></li><li><a href=/frontend-learn/docs/html/05_other/>其他属性</a></li><li><a href=/frontend-learn/docs/html/06_selector/>CSS 选择器</a></li><li><a href=/frontend-learn/docs/html/07_responsive/>响应式</a></li><li><a href=/frontend-learn/docs/html/08_svg/>SVG</a></li><li><a href=/frontend-learn/docs/html/09_chrome/>Chrome 开发者工具</a></li></ul></li><li><span>RxJS</span><ul><li><a href=/frontend-learn/docs/rxjs/01_overview/>概念</a></li><li><a href=/frontend-learn/docs/rxjs/02_operators/>操作符</a></li><li><a href=/frontend-learn/docs/rxjs/03_subject/>Subject</a></li><li><a href=/frontend-learn/docs/rxjs/04_practice/>实践</a></li></ul></li><li><span>Angular</span><ul><li><a href=/frontend-learn/docs/angular/01_overview/>概述</a></li><li><a href=/frontend-learn/docs/angular/02_component/ class=active>组件模板</a></li><li><a href=/frontend-learn/docs/angular/03_communication/>组件通讯</a></li><li><a href=/frontend-learn/docs/angular/04_lifecycle/>组件生命周期</a></li><li><a href=/frontend-learn/docs/angular/05_directive/>指令</a></li><li><a href=/frontend-learn/docs/angular/06_pipe/>管道</a></li><li><a href=/frontend-learn/docs/angular/07_di/>依赖注入</a></li><li><a href=/frontend-learn/docs/angular/08_service/>服务</a></li><li><a href=/frontend-learn/docs/angular/09_form/>表单</a></li><li><a href=/frontend-learn/docs/angular/10_custom_form/>自定义表单控件</a></li><li><a href=/frontend-learn/docs/angular/11_router/>路由</a></li><li><a href=/frontend-learn/docs/angular/12_http/>HttpClient</a></li><li><a href=/frontend-learn/docs/angular/13_other/>其他</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/frontend-learn/svg/menu.svg class=book-icon alt=Menu></label>
<strong>组件模板</strong>
<label for=toc-control><img src=/frontend-learn/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#数据绑定>数据绑定</a></li><li><a href=#属性绑定>属性绑定</a><ul><li><a href=#普通属性>普通属性</a></li><li><a href=#class-属性>class 属性</a></li><li><a href=#style-属性>style 属性</a></li></ul></li><li><a href=#事件绑定>事件绑定</a></li><li><a href=#获取原生-dom-对象>获取原生 DOM 对象</a><ul><li><a href=#在组件模板中获取>在组件模板中获取</a></li><li><a href=#在组件类中获取>在组件类中获取</a></li><li><a href=#contentchild-contentchildren>ContentChild, ContentChildren</a></li></ul></li><li><a href=#内容投影>内容投影</a></li><li><a href=#双向数据绑定>双向数据绑定</a></li><li><a href=#数据绑定容错处理>数据绑定容错处理</a></li><li><a href=#全局样式>全局样式</a></li><li><a href=#变化检测>变化检测</a><ul><li><a href=#变更检测的触发时机>变更检测的触发时机</a></li><li><a href=#变更检测策略>变更检测策略</a></li></ul></li><li><a href=#component-装饰器>Component 装饰器</a><ul><li><a href=#preservewhitespaces>preserveWhitespaces</a></li><li><a href=#interpolation>interpolation</a></li><li><a href=#encapsulation>encapsulation</a></li><li><a href=#viewproviders>viewProviders</a><ul><li><a href=#与-providers-的区别>与 <code>providers</code> 的区别</a></li></ul></li><li><a href=#exportas>exportAs</a></li><li><a href=#host>host</a><ul><li><a href=#hostbinding-和-hostlistener>HostBinding 和 HostListener</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=数据绑定>数据绑定
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a>#</a></h1><p>数据绑定就是将组件类中的数据显示在组件模板中，当组件类中的数据发生变化时会自动被同步到组件模板中（数据驱动 DOM ）。</p><p>在 Angular 中使用差值表达式进行数据绑定，即 <code>{{ }}</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;{{message}}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;{{getInfo()}}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;{{a == b ? &#39;相等&#39;: &#39;不等&#39;}}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h2</span>&gt;{{&#39;Hello Angular&#39;}}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>innerHTML</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>htmlSnippet</span><span style=color:#960050;background-color:#1e0010>&#34;</span>&gt;&lt;/<span style=color:#f92672>p</span>&gt; <span style=color:#75715e>&lt;!-- 对数据中的代码进行转义 --&gt;</span>
</span></span></code></pre></div><h1 id=属性绑定>属性绑定
<a class=anchor href=#%e5%b1%9e%e6%80%a7%e7%bb%91%e5%ae%9a>#</a></h1><h2 id=普通属性>普通属性
<a class=anchor href=#%e6%99%ae%e9%80%9a%e5%b1%9e%e6%80%a7>#</a></h2><p>属性绑定分为两种情况，绑定 DOM 对象属性和绑定 HTML 标记属性。</p><ol><li><p>使用 <code>[属性名称]</code> 为元素绑定 DOM 对象属性。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>img</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>src</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>imgUrl</span><span style=color:#960050;background-color:#1e0010>&#34;</span>/&gt;
</span></span></code></pre></div></li><li><p>使用 <code>[attr.属性名称]</code> 为元素绑定 HTML 标记属性</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>td</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>attr</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>colspan</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>colSpan</span><span style=color:#960050;background-color:#1e0010>&#34;</span>&gt;&lt;/<span style=color:#f92672>td</span>&gt; 
</span></span></code></pre></div><p>在大多数情况下，DOM 对象属性和 HTML 标记属性是对应的关系，所以使用第一种情况。但是某些属性只有 HTML 标记存在，DOM
对象中不存在，此时需要使用第二种情况，比如 <code>colspan</code> 属性，在 DOM 对象中就没有，或者自定义 HTML 属性也需要使用第二种情况。</p><h2 id=class-属性>class 属性
<a class=anchor href=#class-%e5%b1%9e%e6%80%a7>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>class</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>active</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>isActive</span><span style=color:#960050;background-color:#1e0010>&#34;</span>&gt;按钮&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>ngClass</span><span style=color:#960050;background-color:#1e0010>]=&#34;{&#39;</span><span style=color:#a6e22e>active</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>:</span> <span style=color:#a6e22e>true</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>error</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>:</span> <span style=color:#a6e22e>true</span><span style=color:#960050;background-color:#1e0010>}&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p><code>ngClass</code> 可以绑定多个类名。</p><h2 id=style-属性>style 属性
<a class=anchor href=#style-%e5%b1%9e%e6%80%a7>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>style</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>backgroundColor</span><span style=color:#960050;background-color:#1e0010>]=&#34;</span><span style=color:#a6e22e>isActive</span> <span style=color:#960050;background-color:#1e0010>?</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>blue</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>red</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>&gt;按钮&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>ngStyle</span><span style=color:#960050;background-color:#1e0010>]=&#34;{&#39;</span><span style=color:#a6e22e>backgroundColor</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>red</span><span style=color:#960050;background-color:#1e0010>&#39;}&#34;</span>&gt;按钮&lt;/<span style=color:#f92672>button</span>&gt;
</span></span></code></pre></div><p><code>ngClass</code> 可以绑定多个样式属性。</p><h1 id=事件绑定>事件绑定
<a class=anchor href=#%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onSave</span><span style=color:#960050;background-color:#1e0010>($</span><span style=color:#a6e22e>event</span><span style=color:#960050;background-color:#1e0010>)&#34;</span>&gt;按钮&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- 当按下回车键抬起的时候执行函数 --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>keyup</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>enter</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onKeyUp</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>/&gt;
</span></span></code></pre></div><p>事件对象是一个固定的名字就是 <code>$event</code>。</p><h1 id=获取原生-dom-对象>获取原生 DOM 对象
<a class=anchor href=#%e8%8e%b7%e5%8f%96%e5%8e%9f%e7%94%9f-dom-%e5%af%b9%e8%b1%a1>#</a></h1><h2 id=在组件模板中获取>在组件模板中获取
<a class=anchor href=#%e5%9c%a8%e7%bb%84%e4%bb%b6%e6%a8%a1%e6%9d%bf%e4%b8%ad%e8%8e%b7%e5%8f%96>#</a></h2><p>在模板中，可以用 <code>#</code> 来声明一个模板变量。模板变量，可以在组件模板中的任何地方引用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>keyup</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>enter</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>onKeyUp</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>username</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>value</span><span style=color:#960050;background-color:#1e0010>)&#34;</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>username</span>/&gt;
</span></span></code></pre></div><h2 id=在组件类中获取>在组件类中获取
<a class=anchor href=#%e5%9c%a8%e7%bb%84%e4%bb%b6%e7%b1%bb%e4%b8%ad%e8%8e%b7%e5%8f%96>#</a></h2><p>使用 <code>ViewChild</code> 装饰器获取一个元素</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>p</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>paragraph</span>&gt;home works!&lt;/<span style=color:#f92672>p</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>AfterViewInit</span>, <span style=color:#a6e22e>ElementRef</span>, <span style=color:#a6e22e>ViewChild</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@angular/core&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HomeComponent</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>AfterViewInit</span> {
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ViewChild</span>(<span style=color:#e6db74>&#34;paragraph&#34;</span>) <span style=color:#a6e22e>paragraph</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ElementRef</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>HTMLParagraphElement</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ngAfterViewInit</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>paragraph</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>nativeElement</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>使用 <code>ViewChildren</code> 获取一组元素</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>items</span>&gt;a&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>items</span>&gt;b&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>li</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>items</span>&gt;c&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ul</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>AfterViewInit</span>, <span style=color:#a6e22e>QueryList</span>, <span style=color:#a6e22e>ViewChildren</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@angular/core&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Component</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;app-home&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./home.component.html&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>styles</span><span style=color:#f92672>:</span> []
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HomeComponent</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>AfterViewInit</span> {
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ViewChildren</span>(<span style=color:#e6db74>&#34;items&#34;</span>) <span style=color:#a6e22e>items</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>QueryList</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>HTMLLIElement</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ngAfterViewInit</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>items</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>toArray</span>()) <span style=color:#75715e>// items 中的元素无法直接使用，需要先使用 toArray 转换成一个数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=contentchild-contentchildren>ContentChild, ContentChildren
<a class=anchor href=#contentchild-contentchildren>#</a></h2><ul><li><code>ContentChildren</code> 属性装饰器用来从通过 Content Projection 方式设置的视图中获取 <code>ng-content</code> 里面匹配的多个元素。</li><li><code>ContentChild</code> 类似 <code>ContentChildren</code>，不过返回的是一个元素。</li></ul><p><code>ContentChild</code> 和 <code>ViewChild</code> 的区别：</p><ul><li><code>ContentChild</code> 用来从通过 Content Projection 方式 (<code>ng-content</code>) 设置的视图中获取匹配的元素。</li><li><code>ViewChild</code> 匹配的元素在组件的模板中定义的内容，它是组件的一部分。</li></ul><h1 id=内容投影>内容投影
<a class=anchor href=#%e5%86%85%e5%ae%b9%e6%8a%95%e5%bd%b1>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- app.component.html --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>bootstrap-panel</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;heading&#34;</span>&gt;
</span></span><span style=display:flex><span>        Heading
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;body&#34;</span>&gt;
</span></span><span style=display:flex><span>        Body
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>bootstrap-panel</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- panel.component.html --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;panel panel-default&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;panel-heading&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>ng-content</span> <span style=color:#a6e22e>select</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.heading&#34;</span>&gt;&lt;/<span style=color:#f92672>ng-content</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;panel-body&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>ng-content</span> <span style=color:#a6e22e>select</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.body&#34;</span>&gt;&lt;/<span style=color:#f92672>ng-content</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>如果只有一个 <code>ng-content</code>，不需要 <code>select</code> 属性。直接 <code>&lt;ng-content>&lt;/ng-content></code> 就可以。</p><p><code>ng-content</code> 在浏览器中会被 <code>&lt;div class="heading">&lt;/div></code> 替代，如果不想要这个额外的 <code>div</code>，可以使用 <code>ng-container</code> 替代这个
<code>div</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- app.component.html --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>bootstrap-panel</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ng-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;heading&#34;</span>&gt;
</span></span><span style=display:flex><span>        Heading
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ng-container</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ng-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;body&#34;</span>&gt;
</span></span><span style=display:flex><span>        Body
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>ng-container</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>bootstrap-panel</span>&gt;
</span></span></code></pre></div><h1 id=双向数据绑定>双向数据绑定
<a class=anchor href=#%e5%8f%8c%e5%90%91%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a>#</a></h1><p>数据在组件类和组件模板中双向同步。</p><p>Angular 将双向数据绑定功能放在了 <code>@angular/forms</code> 模块中，所以要实现双向数据绑定需要依赖该模块。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>FormsModule</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@angular/forms&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>NgModule</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>FormsModule</span>],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppModule</span> {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#960050;background-color:#1e0010>[(</span><span style=color:#a6e22e>ngModel</span><span style=color:#960050;background-color:#1e0010>)]=&#34;</span><span style=color:#a6e22e>username</span><span style=color:#960050;background-color:#1e0010>&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>change</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;在组件类中更改 username&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>div</span>&gt;username: {{ username }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppComponent</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>change</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>username</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hello Angular&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=数据绑定容错处理>数据绑定容错处理
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%b9%e9%94%99%e5%a4%84%e7%90%86>#</a></h1><p>当绑定的对象数据层级比较深，并且对象中的某些属性是可选的。如果不做容错处理，当访问的属性不存在时，就会报错。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// app.component.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppComponent</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>task</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>person</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;张三&#39;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- 方式一 --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>span</span> <span style=color:#960050;background-color:#1e0010>*</span><span style=color:#a6e22e>ngIf</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;task.person&#34;</span>&gt;{{ task.person.name }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- 方式二 --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>span</span>&gt;{{ task.person?.name }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span></code></pre></div><h1 id=全局样式>全局样式
<a class=anchor href=#%e5%85%a8%e5%b1%80%e6%a0%b7%e5%bc%8f>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/* 第一种方式 在 styles.css 文件中 */</span>
</span></span><span style=display:flex><span>@<span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;~bootstrap/dist/css/bootstrap.css&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>/* ~ 相对node_modules文件夹 */</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!-- 第二种方式 在 index.html 文件中  --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css&#34;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span>/&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 第三种方式 在 angular.json 文件中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;styles&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>[
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;./node_modules/bootstrap/dist/css/bootstrap.min.css&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;src/styles.css&#34;</span>
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h1 id=变化检测>变化检测
<a class=anchor href=#%e5%8f%98%e5%8c%96%e6%a3%80%e6%b5%8b>#</a></h1><p>Angular 的 变更检测（Change Detection）是 Angular 用来检查组件及其视图是否需要更新的一种机制。每当组件的状态变化时，Angular
会遍历组件树并检查哪些组件需要更新视图。变更检测是 Angular 中的核心功能之一，它决定了应用的响应性和性能。</p><h2 id=变更检测的触发时机>变更检测的触发时机
<a class=anchor href=#%e5%8f%98%e6%9b%b4%e6%a3%80%e6%b5%8b%e7%9a%84%e8%a7%a6%e5%8f%91%e6%97%b6%e6%9c%ba>#</a></h2><p>变更检测是由 Angular 的 变更检测机制触发的，主要触发时机包括：</p><ul><li>用户事件：如按钮点击、输入框文本变化等，都会触发变更检测。</li><li>异步操作：如 HTTP 请求返回数据，或者 <code>setTimeout()</code>、<code>Promise</code> 解决等，都可能触发变更检测。</li><li>手动触发：通过 <code>ChangeDetectorRef.detectChanges()</code> 或 <code>ChangeDetectorRef.markForCheck()</code>，手动通知 Angular 检查某个组件或视图。</li></ul><h2 id=变更检测策略>变更检测策略
<a class=anchor href=#%e5%8f%98%e6%9b%b4%e6%a3%80%e6%b5%8b%e7%ad%96%e7%95%a5>#</a></h2><p><code>ChangeDetectionStrategy</code> 是一个控制组件变更检测机制的策略，它决定了 Angular 如何检查组件的变化。默认情况下，Angular 使用
<code>ChangeDetectionStrategy.Default</code>，即每次检测时会检查所有组件。使用不同的变更检测策略可以提高性能，尤其是在大型应用中。</p><p>常见的 <code>ChangeDetectionStrategy</code> 有两种：</p><ul><li><p><code>ChangeDetectionStrategy.Default</code>：Angular 会在每次检测周期中检查所有的组件，包括它的子组件，直到变化被检测到并更新视图。在应用复杂度较高时可能导致性能问题。</p></li><li><p><code>ChangeDetectionStrategy.OnPush</code>：使用 <code>OnPush</code> 策略时，只会在以下几种情况之一时检查组件的变化：</p><ul><li>输入属性（<code>@Input()</code>）的值发生变化。</li><li>事件处理器被触发（如点击、输入等）。</li><li>手动调用 <code>ChangeDetectorRef.detectChanges()</code> 或 <code>ChangeDetectorRef.markForCheck()</code>。</li></ul><p>当<strong>组件依赖于外部输入数据，且数据变化不频繁时</strong>，使用 <code>OnPush</code> 可以优化性能。</p></li></ul><h1 id=component-装饰器>Component 装饰器
<a class=anchor href=#component-%e8%a3%85%e9%a5%b0%e5%99%a8>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 指定组件的 CSS 选择器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 选择器会告诉 Angular：当在模板 HTML 中找到相应的标签时，就把该组件实例化在那里。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-component-overview&#39;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 定义 HTML 模板
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 在单独的文件中定义 HTML 模板
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./component-overview.component.html&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>// HTML 模板也可以在组件中定义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// template: &#39;&lt;h1&gt;Hello World!&lt;/h1&gt;&#39;,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 多行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// template: `
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//  &lt;h1&gt;Hello World!&lt;/h1&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//  &lt;p&gt;This template definition spans multiple lines.&lt;/p&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// `
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 声明组件的样式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 在单独的文件中定义组件模板的样式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>styleUrls</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;./component-overview.component.css&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 组件模板的样式也可以在组件中定义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// styles 属性接受一个包含 CSS 规则的字符串数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// styles: [&#39;h1 { font-weight: normal; }&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// styles 属性接受一个包含 CSS 规则的字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// styles: ``
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>})
</span></span></code></pre></div><h2 id=preservewhitespaces>preserveWhitespaces
<a class=anchor href=#preservewhitespaces>#</a></h2><p><code>preserveWhitespaces</code> 值为 <code>false</code> 时，从编译后的模板中移除可能多余的空白字符，为 <code>true</code> 时则保留，空白字符就是指那些能在 JavaScript 正则表达式中匹配 <code>\s</code> 的字符。默认为 <code>false</code>。</p><h2 id=interpolation>interpolation
<a class=anchor href=#interpolation>#</a></h2><p>Angular 默认模板插值器 <code>{{}}</code>。<code>interpolation</code> 属性可以用来指定插值器的符号。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ((data))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    `</span>,
</span></span><span style=display:flex><span>    <span style=color:#75715e>// &#34;((&#34;, &#34;))&#34; 代替 &#34;{{&#34;, &#34;}}&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>interpolation</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;((&#34;</span>,<span style=color:#e6db74>&#34;))&#34;</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppComponent</span> {}
</span></span></code></pre></div><h2 id=encapsulation>encapsulation
<a class=anchor href=#encapsulation>#</a></h2><p>主要作用是控制样式的作用域和隔离性。在 Angular 中，组件的样式默认情况下是局部的，只有在该组件的模板中生效，但也可以通过配置不同的封装策略来改变这一行为。</p><p><code>encapsulation</code> 主要有三种取值：</p><ul><li><code>ViewEncapsulation.Emulated</code>（默认值）模拟浏览器原生的 Shadow DOM 来封装组件样式。Angular 会将组件的样式加上一些属性选择器（通常是基于组件的 <code>ViewEncapsulation</code> 设置），使得样式只作用于当前组件的模板。</li><li><code>ViewEncapsulation.None</code>：使用此模式时，组件的样式将不受任何封装限制，样式会全局生效，任何在该组件中定义的样式都会作用于整个应用。</li><li><code>ViewEncapsulation.ShadowDom</code>：此模式使用浏览器的原生 Shadow DOM 实现样式封装。组件的样式仅会应用于该组件的 Shadow DOM 内部，而不会影响外部或其他组件。</li></ul><h2 id=viewproviders>viewProviders
<a class=anchor href=#viewproviders>#</a></h2><p>用于指定一个组件视图范围内的依赖注入（DI）提供者。它的作用是定义只在该组件的视图中可用的依赖，而不会影响到组件的父组件或其他地方。</p><h3 id=与-providers-的区别>与 <code>providers</code> 的区别
<a class=anchor href=#%e4%b8%8e-providers-%e7%9a%84%e5%8c%ba%e5%88%ab>#</a></h3><p><code>providers</code> 定义的是整个组件（包括视图和子视图）可以访问的服务，而 <code>viewProviders</code> 只在当前组件的视图中有效，作用范围较小。</p><h2 id=exportas>exportAs
<a class=anchor href=#exportas>#</a></h2><p><code>exportAs</code> 是组件或指令的一个元数据属性，用于指定一个别名，使组件或指令可以通过模板中的 <code>#templateReferenceVariable</code> （模板引用变量）进行访问。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Directive</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Directive</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[appHighlight]&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>exportAs</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;highlight&#39;</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HighlightDirective</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isHighlighted</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>toggleHighlight() {</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isHighlighted</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isHighlighted</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在模板中使用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>appHighlight</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>highlight</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;highlight&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Hover</span> <span style=color:#a6e22e>me</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>toggle</span> <span style=color:#a6e22e>highlight</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>button</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>click</span><span style=color:#960050;background-color:#1e0010>)=&#34;</span><span style=color:#a6e22e>highlight.toggleHighlight</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;<span style=color:#a6e22e>Toggle</span> <span style=color:#a6e22e>Highlight</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;<span style=color:#a6e22e>Highlight</span> <span style=color:#a6e22e>Status</span><span style=color:#f92672>:</span> {{ <span style=color:#a6e22e>highlight</span>.<span style=color:#a6e22e>isHighlighted</span> }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span></code></pre></div><h2 id=host>host
<a class=anchor href=#host>#</a></h2><p><code>host</code> 是组件或指令的一个元数据属性，用于设置宿主元素的行为和样式。它允许你在组件或指令的宿主元素上添加事件监听器、属性、类名和样式等。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Component</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-example&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`&lt;p&gt;Host Element Example&lt;/p&gt;`</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>host</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;[class.custom-class]&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;true&#39;</span>,  <span style=color:#75715e>// 添加自定义类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#39;[attr.aria-label]&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#34;Custom Label&#34;&#39;</span>,  <span style=color:#75715e>// 设置属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#39;(click)&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;onClick()&#39;</span>,  <span style=color:#75715e>// 绑定 click 事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#39;[style.background-color]&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#34;lightblue&#34;&#39;</span>,  <span style=color:#75715e>// 设置背景颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#39;[style.padding]&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#34;10px&#34;&#39;</span>  <span style=color:#75715e>// 设置内边距     
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleComponent</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onClick() {</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Host element clicked!&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=hostbinding-和-hostlistener>HostBinding 和 HostListener
<a class=anchor href=#hostbinding-%e5%92%8c-hostlistener>#</a></h3><p><code>@HostBinding</code>、<code>@HostListener</code> 装饰器的功能和 <code>host</code> 属性类似，只不过使用方式不同。</p><ul><li><code>@HostBinding</code> 用于将组件或指令的属性、样式、类等绑定到宿主元素。</li><li><code>@HostListener()</code> 可以监听宿主元素上的事件。</li></ul><p>官网的说明：</p><ul><li><code>HostBinding</code>：用于把一个 DOM 属性标记为绑定到宿主的属性，并提供配置元数据。 Angular
在变更检测期间会自动检查宿主属性绑定，如果这个绑定变化了，它就会更新该指令所在的宿主元素。</li><li><code>HostListener</code>：用于声明要监听的 DOM 事件，并提供在该事件发生时要运行的处理器方法。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Component</span>, <span style=color:#a6e22e>HostBinding</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app-example&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`&lt;p&gt;HostBinding Example&lt;/p&gt;`</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleComponent</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>@HostBinding</span>(<span style=color:#e6db74>&#39;class.active&#39;</span>) <span style=color:#a6e22e>isActive</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;  <span style=color:#75715e>// 绑定宿主元素的类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>@HostBinding</span>(<span style=color:#e6db74>&#39;style.backgroundColor&#39;</span>) <span style=color:#a6e22e>backgroundColor</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;lightblue&#39;</span>;  <span style=color:#75715e>// 绑定背景色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>@HostListener</span>(<span style=color:#e6db74>&#39;click&#39;</span>) <span style=color:#a6e22e>onClick() {</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Host element clicked!&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>@HostListener</span>(<span style=color:#e6db74>&#39;window:resize&#39;</span>, [<span style=color:#e6db74>&#39;$event&#39;</span>]) <span style=color:#a6e22e>onResize</span>(<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>Event</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Window resized&#39;</span>, <span style=color:#a6e22e>event</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>使用 <code>@HostBinding</code> 和 <code>@HostListener</code> 可以提供更灵活的宿主元素交互，适用于需要动态响应事件或更改宿主元素样式和属性的场景。</li><li>使用 <code>host</code> 属性则更适合为宿主元素配置一些初始行为，如设置类、属性或事件监听器，但这些行为一旦定义就不会再变化。</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/shipengqi/frontend-learn/commit/3794de90b5da39af1a7e27a61a4b2da240d72900 title='Last modified by PengQi Shi | December 8, 2024' target=_blank rel=noopener><img src=/frontend-learn/svg/calendar.svg class=book-icon alt=Calendar>
<span>December 8, 2024</span></a></div><div><a class="flex align-center" href=https://github.com/shipengqi/frontend-learn/edit/master/content/docs/angular/02_component.md target=_blank rel=noopener><img src=/frontend-learn/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#数据绑定>数据绑定</a></li><li><a href=#属性绑定>属性绑定</a><ul><li><a href=#普通属性>普通属性</a></li><li><a href=#class-属性>class 属性</a></li><li><a href=#style-属性>style 属性</a></li></ul></li><li><a href=#事件绑定>事件绑定</a></li><li><a href=#获取原生-dom-对象>获取原生 DOM 对象</a><ul><li><a href=#在组件模板中获取>在组件模板中获取</a></li><li><a href=#在组件类中获取>在组件类中获取</a></li><li><a href=#contentchild-contentchildren>ContentChild, ContentChildren</a></li></ul></li><li><a href=#内容投影>内容投影</a></li><li><a href=#双向数据绑定>双向数据绑定</a></li><li><a href=#数据绑定容错处理>数据绑定容错处理</a></li><li><a href=#全局样式>全局样式</a></li><li><a href=#变化检测>变化检测</a><ul><li><a href=#变更检测的触发时机>变更检测的触发时机</a></li><li><a href=#变更检测策略>变更检测策略</a></li></ul></li><li><a href=#component-装饰器>Component 装饰器</a><ul><li><a href=#preservewhitespaces>preserveWhitespaces</a></li><li><a href=#interpolation>interpolation</a></li><li><a href=#encapsulation>encapsulation</a></li><li><a href=#viewproviders>viewProviders</a><ul><li><a href=#与-providers-的区别>与 <code>providers</code> 的区别</a></li></ul></li><li><a href=#exportas>exportAs</a></li><li><a href=#host>host</a><ul><li><a href=#hostbinding-和-hostlistener>HostBinding 和 HostListener</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>